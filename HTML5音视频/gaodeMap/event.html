<!--
 * @Author: YXS
 * @Date: 2020-07-23 10:04:14
 * @LastEditors: YXS
 * @LastEditTime: 2020-07-23 10:48:10
 * @Description: 事件相关
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=4d7f0ba72f421ebaba7c0ee60a915c42"></script>
  <style type="text/css">
    *{margin: 0;padding: 0;list-style: none;}
    #container{width: 100%;height: 100%;position: absolute;left: 0;top: 0;}
    #panel{
        position: fixed;
        background: white;
        top: 10px;
        right: 10px;
        width: 280px;
        height: 200px;
    }
    #search{width: 200px;height: 100px;position: absolute;left: 10px;top: 10px;background: white;}
    #box{width: 200px;height: 50px;position: absolute;z-index: 10;background: white;top: 20px;right: 20px;}
  </style>
</head>
<body>
  <div id="container"></div>
  <div id='box'>
      <button id='bt1'>绑定事件</button>
      <button id='bt2'>解除绑定</button>
  </div>
  <script type="text/javascript">
    var map = new AMap.Map('container',{
        zoom:16,
        center:[116.379391,39.861536],
    });

    var button1 = document.getElementById('bt1');
    var button2 = document.getElementById('bt2');

    // 绑定事件
    var lis1 = AMap.event.addDomListener(button1,'click',function(){
        //alert(1);
        map.zoomIn();
    });
    // 接触绑定事件
    AMap.event.addDomListener(button2,'click',function(){
        AMap.event.removeListener(lis1);
    });
    /**
     * @Author: YXS
     * @Description: 自定义事件
     */
    var count = 0 // 记录事件点击了几次
    var _onClick = function() {
      // count += 1
      // console.log(count)
      // 事件派发，也可以说是变量的改变
      map.emit('count', {count: count+=1})
    }
    // 监听的变量发生改变时触发的函数
    var _onCount = function() {
      console.log(count)
    }
    AMap.event.addListener(map, 'click', _onClick)
    // 地图对象的 on 方法
    // 监听到变量发生改变时
    map.on('count', _onCount)
    
</script>
</body>
</html>
<!--
 * @Author: YXS
 * @Date: 2020-11-05 09:52:55
 * @LastEditors: YXS
 * @LastEditTime: 2020-11-05 10:30:37
 * @Description: 获取 URL 参数
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>获取 URL 参数</title>
</head>
<body>
    <script>
        // 传统方式，使用 location.search
        // function query(name) {
        //     // 去掉取出来的问号
        //     const search = location.search.substr(1)
        //     // 匹配要取的值：以空字符串或者 & 开头的，要取的字符串等于的结果，以&结尾或空结尾的字符串
        //     const reg = new RegExp(`(^|&)${name}=([^&]*)(&|$)`, 'i')
        //     // 匹配的结果形式为数组形式，匹配不到则返回 null
        //     const res = search.match(reg)
        //     if (res === null) return null
        //     console.log(res)
        //     // 匹配到了则返回一个数组，第一个元素为整个匹配到的字符串，
        //     // 第二个元素为开头的字符串(^|&)
        //     // 第三个元素为参数名后面的值 ([^&]*)
        //     // 第四个元素为结尾的字符串 (&|$)
        //     // 所以这里返回第三个元素
        //     return res[2]
        // }
        // query('b')

        // URLSearchParams
        // function query(name) {
        //     const search = location.search
        //     const p = new URLSearchParams(search)
        //     return p.get(name)
        // }
        // console.log(query('a'))
        
        // 将 URL 参数解析成对象
        // 传统方式，使用 location search
        // function queryToObj() {
        //     const res = {}
        //     const search = location.search.substr(1)
        //     search.split('&').forEach(paramStr => {
        //         const arr = paramStr.split('=')
        //         const key = arr[0]
        //         const val = arr[1]
        //         res[key] = val
        //     })
        //     return res
        // }
        // console.log(queryToObj())

        // 使用 URLSearchParams
        function queryToObj() {
            const res = {}
            const pList = new URLSearchParams(location.search)
            pList.forEach((val, key) => {
                res[key] = val
            })
            return res
        }
        console.log(queryToObj())
    </script>
</body>
</html>